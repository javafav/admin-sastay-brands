<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="fragments :: page_head('Forgot Password', 'none')"></head>
<body class="d-flex flex-column min-vh-100">
    <div class="container-fluid flex-grow-1">
        <div th:replace="navigation :: nav_menu"></div>
        <div th:replace="navigation :: special_message"></div>
        <div style="border-bottom: 20px solid black; margin: 5px; padding: 5px;"></div>

        <div>&nbsp;</div>
        <div class="text-center">
            <h2>Reset Your Password</h2>
        </div>
        
        <form th:action="@{/reset_password}" method="post" style="max-width: 420px; margin: 0 auto;">
            <input type="hidden" th:value="${token}" name="token" /> 
            <div class="border border-secondary rounded p-3">
                <div>
                    <p>
                        <input type="password" name="password" id="password" placeholder="Enter your new password"
                            class="form-control"
                            minlength="8" maxlength="15" required="required" autofocus="autofocus"/>            
                    </p>
                </div>
                <div>
                    <p>
                        <input type="password" placeholder="Confirm your new password"
                            class="form-control" oninput="checkPasswordMatch(this)"
                            minlength="8" maxlength="15" required="required"/>                
                    </p>
                </div>
                <div class="text-center">
                    <input type="submit" value="Change Password" class="btn btn-primary" />
                </div>
            </div>
        </form>
        
        <div>&nbsp;</div>
    </div>  
    <div th:replace="fragments :: footer_menu" class="mt-auto"></div>
    
    <script type="text/javascript">
        contextPath = "[[@{/}]]";
        var csrfHeaderName = "[[${_csrf.headerName}]]";
        var csrfValue = "[[${_csrf.token}]]";

        function checkPasswordMatch(confirmPassword) {
            if (confirmPassword.value != $("#password").val()) {
                confirmPassword.setCustomValidity("Passwords do not match!");
            } else {
                confirmPassword.setCustomValidity("");
            }
        }
    </script>
    <script type="text/javascript" th:src="@{/js/common.js}"></script>
    <script type="text/javascript" th:src="@{/js/subscription_modal.js}"></script>
    <script type="text/javascript" th:src="@{/js/shopping_cart_items_count.js}"></script>
</body>
</html>
